/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2012 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.3
 *
 */
(function(C,B,A,E){var D=C(B);C.fn.lazyload=function(F){var H=this;var I;var G={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:B,data_attribute:"original",skip_invisible:true,appear:null,load:null};function J(){var K=0;H.each(function(){var L=C(this);if(G.skip_invisible&&!L.is(":visible")){return }if(C.abovethetop(this,G)||C.leftofbegin(this,G)){}else{if(!C.belowthefold(this,G)&&!C.rightoffold(this,G)){L.trigger("appear");K=0}else{if(++K>G.failure_limit){return false}}}})}if(F){if(E!==F.failurelimit){F.failure_limit=F.failurelimit;delete F.failurelimit}if(E!==F.effectspeed){F.effect_speed=F.effectspeed;delete F.effectspeed}C.extend(G,F)}I=(G.container===E||G.container===B)?D:C(G.container);if(0===G.event.indexOf("scroll")){I.bind(G.event,function(K){return J()})}this.each(function(){var K=this;var L=C(K);K.loaded=false;L.one("appear",function(){if(!this.loaded){if(G.appear){var O=H.length;G.appear.call(K,O,G)}var M=function(){L.hide().attr("src",L.data(G.data_attribute))[G.effect](G.effect_speed);K.loaded=true;if(L.hasClass("shim")){L.removeAttr("width height").removeClass("shim")}L.trigger("lazyloaded");var P=C.grep(H,function(R){return !R.loaded});H=C(P);if(G.load){var Q=H.length;G.load.call(K,Q,G)}};var N=C("<img />").attr("src",L.data(G.data_attribute));if(C.fn.imageLoad){N.imageLoad(M)}else{N.bind("load",M)}}});if(0!==G.event.indexOf("scroll")){L.bind(G.event,function(M){if(!K.loaded){L.trigger("appear")}})}});D.bind("resize",function(K){J()});if((/iphone|ipod|ipad.*os 5/gi).test(navigator.appVersion)){D.bind("pageshow",function(K){if(K.originalEvent.persisted){H.each(function(){C(this).trigger("appear")})}})}C(B).load(function(){J()});return this};C.belowthefold=function(G,H){var F;if(H.container===E||H.container===B){F=D.height()+D.scrollTop()}else{F=C(H.container).offset().top+C(H.container).height()}return F<=C(G).offset().top-H.threshold};C.rightoffold=function(G,H){var F;if(H.container===E||H.container===B){F=D.width()+D.scrollLeft()}else{F=C(H.container).offset().left+C(H.container).width()}return F<=C(G).offset().left-H.threshold};C.abovethetop=function(G,H){var F;if(H.container===E||H.container===B){F=D.scrollTop()}else{F=C(H.container).offset().top}return F>=C(G).offset().top+H.threshold+C(G).height()};C.leftofbegin=function(G,H){var F;if(H.container===E||H.container===B){F=D.scrollLeft()}else{F=C(H.container).offset().left}return F>=C(G).offset().left+H.threshold+C(G).width()};C.inviewport=function(F,G){return !C.rightoffold(F,G)&&!C.leftofbegin(F,G)&&!C.belowthefold(F,G)&&!C.abovethetop(F,G)};C.extend(C.expr[":"],{"below-the-fold":function(F){return C.belowthefold(F,{threshold:0})},"above-the-top":function(F){return !C.belowthefold(F,{threshold:0})},"right-of-screen":function(F){return C.rightoffold(F,{threshold:0})},"left-of-screen":function(F){return !C.rightoffold(F,{threshold:0})},"in-viewport":function(F){return C.inviewport(F,{threshold:0})},"above-the-fold":function(F){return !C.belowthefold(F,{threshold:0})},"right-of-fold":function(F){return C.rightoffold(F,{threshold:0})},"left-of-fold":function(F){return !C.rightoffold(F,{threshold:0})}})})(jQuery,window,document);