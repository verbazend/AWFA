(function(A){A.ImageLoader=function(D){var C,B;C=new Image();B=A.Deferred(function(E){var G=".ImageLoader",F;F=A.map([A.browser.msie?"readystatechange":"load","abort","error"],function(H){return H+G}).join(" ");A(C).bind(F,function(H){if(H.type==="readystatechange"){if(this.readyState!=="complete"){return false}}if(H.type==="abort"||H.type==="error"){E.rejectWith(this,[H])}else{E.resolveWith(this,[H])}A(this).unbind(G);return false})}).promise();B.load=function(){if(!C.src){C.src=D}return this};return B};A.fn.imageLoad=function(B){return this.filter("img").each(function(){var C=this;if(!C.src){A.error("imageLoad: undefined src attribute")}A.ImageLoader(C.src).load().then(function(D){B.call(C,D)},function(D){B.call(C,D)})})}}(jQuery));